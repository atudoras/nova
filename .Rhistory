library(devtools) # Make sure that the devtools library is loaded
install_github("atudoras/nova");
setwd("~/My Documents (change name)/R_Caroline/R code/Final version")
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
source("NOVA_functions.R")
# ============================================================================
# PACKAGE INSTALLATION AND LOADING
# ============================================================================
# Function to install packages if not available
install_if_missing <- function(packages, bioc_packages = NULL) {
# CRAN packages
missing_cran <- packages[!sapply(packages, require, character.only = TRUE, quietly = TRUE)]
if (length(missing_cran) > 0) {
cat("Installing CRAN packages:", paste(missing_cran, collapse = ", "), "\n")
install.packages(missing_cran, dependencies = TRUE)
}
# Bioconductor packages
if (!is.null(bioc_packages)) {
if (!require("BiocManager", quietly = TRUE)) {
install.packages("BiocManager")
}
missing_bioc <- bioc_packages[!sapply(bioc_packages, require, character.only = TRUE, quietly = TRUE)]
if (length(missing_bioc) > 0) {
cat("Installing Bioconductor packages:", paste(missing_bioc, collapse = ", "), "\n")
BiocManager::install(missing_bioc)
}
}
}
# Define required packages
cran_packages <- c(
# Data manipulation
"dplyr", "tidyr", "stringr", "readr", "tibble", "purrr",
# File I/O
"readxl", "writexl", "rlang",
# Visualization
"ggplot2", "RColorBrewer", "corrplot", "gridExtra",
"ggdendro", "ellipse",
# Analysis
"fdapace", "VennDiagram", "factoextra", "cluster",
"dendextend", "splines"
)
bioc_packages <- c("sva", "ggtree", "limma")
# Install and load all packages
install_if_missing(cran_packages, bioc_packages)
# Install and load all packages
install_if_missing(cran_packages, bioc_packages)
# Load all packages
invisible(lapply(c(cran_packages, bioc_packages), library, character.only = TRUE))
cat("âœ“ All packages loaded successfully\n")
```{r cars}
# First, discover what's available in your data directory
main_directory <- "MEA Neuronal Agonists"  # Update this path
# Discover the structure of your MEA data
discovery_results <- discover_mea_structure(main_directory)
# Stage all changes
git add .
git add
source("R/data_handling.R")
devtools::document(roclets = c('rd', 'collate', 'namespace'))
# Then check what's in NAMESPACE
readLines("NAMESPACE")
# And check what .Rd files were created
list.files("man/")
library(roxygen2); # Read in the roxygen2 R package
roxygenise();      # Builds the help files
rm(list = c("%||%", "aggregate_data", "analyze_pca_variable_importance_general", "apply_scaling_enhanced",
"clean_heatmap_matrix", "create_annotations_enhanced", "create_color_palette_enhanced", "create_mea_heatmaps_enhanced",
"discover_mea_structure", "handle_missing_values", "pca_analysis_enhanced", "pca_plots_enhanced", "plot_pca_trajectories_general",
"print_detailed_summary", "process_mea_flexible", "quality_filter", "setup_color_scheme"))
library(roxygen2); # Read in the roxygen2 R package
roxygenise();      # Builds the help files
