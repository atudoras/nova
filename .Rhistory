library(devtools) # Make sure that the devtools library is loaded
install_github("atudoras/nova");
setwd("~/My Documents (change name)/R_Caroline/R code/Final version")
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
source("NOVA_functions.R")
# ============================================================================
# PACKAGE INSTALLATION AND LOADING
# ============================================================================
# Function to install packages if not available
install_if_missing <- function(packages, bioc_packages = NULL) {
# CRAN packages
missing_cran <- packages[!sapply(packages, require, character.only = TRUE, quietly = TRUE)]
if (length(missing_cran) > 0) {
cat("Installing CRAN packages:", paste(missing_cran, collapse = ", "), "\n")
install.packages(missing_cran, dependencies = TRUE)
}
# Bioconductor packages
if (!is.null(bioc_packages)) {
if (!require("BiocManager", quietly = TRUE)) {
install.packages("BiocManager")
}
missing_bioc <- bioc_packages[!sapply(bioc_packages, require, character.only = TRUE, quietly = TRUE)]
if (length(missing_bioc) > 0) {
cat("Installing Bioconductor packages:", paste(missing_bioc, collapse = ", "), "\n")
BiocManager::install(missing_bioc)
}
}
}
# Define required packages
cran_packages <- c(
# Data manipulation
"dplyr", "tidyr", "stringr", "readr", "tibble", "purrr",
# File I/O
"readxl", "writexl", "rlang",
# Visualization
"ggplot2", "RColorBrewer", "corrplot", "gridExtra",
"ggdendro", "ellipse",
# Analysis
"fdapace", "VennDiagram", "factoextra", "cluster",
"dendextend", "splines"
)
bioc_packages <- c("sva", "ggtree", "limma")
# Install and load all packages
install_if_missing(cran_packages, bioc_packages)
# Install and load all packages
install_if_missing(cran_packages, bioc_packages)
# Load all packages
invisible(lapply(c(cran_packages, bioc_packages), library, character.only = TRUE))
cat("âœ“ All packages loaded successfully\n")
```{r cars}
# First, discover what's available in your data directory
main_directory <- "MEA Neuronal Agonists"  # Update this path
# Discover the structure of your MEA data
discovery_results <- discover_mea_structure(main_directory)
